/*! Copyright 2003-2022 Rustici Software, LLC All Rights Reserved. Rustici-Engine 21.1.1 2022-08-02T09:15:20-0500 68e0589991695ae44f2af0f5e1fba98fac4371fc client.loader */

!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){var l,n,e,t,r,u,o,i,a,s,c,d;function p(){}return l=Math,n=Object.create||function(e){var t;return p.prototype=e,t=new p,p.prototype=null,t},t=(e={}).lib={},r=t.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=l.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4){var r=function(t){var t=t,n=987654321,r=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(.5<l.random()?1:-1)}}(4294967296*(o||l.random())),o=987654071*r();t.push(4294967296*r()|0)}return new u.init(t,e)}}),o=e.enc={},i=o.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},a=o.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},s=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,o=this.blockSize,i=r/(4*o),a=(i=e?l.ceil(i):l.max((0|i)-this._minBufferSize,0))*o,s=l.min(4*a,r);if(a){for(var c=0;c<a;c+=o)this._doProcessBlock(n,c);var d=n.splice(0,a);t.sigBytes-=s}return new u.init(d,s)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=c.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new d.HMAC.init(n,t).finalize(e)}}}),d=e.algo={},e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(e){var t,o,i,n;return t=e.lib,o=t.Base,i=t.WordArray,(n=e.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(e){var t,o;return"function"==typeof ArrayBuffer&&(t=e.lib.WordArray,o=t.init,(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t),e.lib.WordArray}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(c){return function(o){var e=c,t=e.lib,n=t.WordArray,r=t.Hasher,i=e.algo,a=[],_=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var t=2,n=0;n<64;)!function(e){for(var t=o.sqrt(e),n=2;n<=t;n++)if(!(e%n))return;return 1}(t)||(n<8&&(a[n]=e(o.pow(t,.5))),_[n]=e(o.pow(t,1/3)),n++),t++}();var w=[],s=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n,r,o,i,a=this._hash.words,s=a[0],c=a[1],d=a[2],l=a[3],u=a[4],p=a[5],h=a[6],f=a[7],m=0;m<64;m++){m<16?w[m]=0|e[t+m]:(r=((n=w[m-15])<<25|n>>>7)^(n<<14|n>>>18)^n>>>3,i=((o=w[m-2])<<15|o>>>17)^(o<<13|o>>>19)^o>>>10,w[m]=r+w[m-7]+i+w[m-16]);var y=s&c^s&d^c&d,g=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),R=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&p^~u&h)+_[m]+w[m],f=h,h=p,p=u,u=l+R|0,l=d,d=c,c=s,s=R+(g+y)|0}a[0]=a[0]+s|0,a[1]=a[1]+c|0,a[2]=a[2]+d|0,a[3]=a[3]+l|0,a[4]=a[4]+u|0,a[5]=a[5]+p|0,a[6]=a[6]+h|0,a[7]=a[7]+f|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=o.floor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=r._createHelper(s),e.HmacSHA256=r._createHmacHelper(s)}(Math),c.SHA256}),function(){var e=0;if(void 0!==window.ContentURL&&-1<window.ContentURL.indexOf("EngineWebServices//api")&&void 0!==window.document.scripts)for(;e<window.document.scripts.length;e+=1)void 0!==window.document.scripts[e]&&void 0!==window.document.scripts[e].attributes.src&&-1<window.document.scripts[e].attributes.src.value.indexOf("scormdriver.js")&&(window.document.scripts[e].onload=function(){window.strLMSStandard="SCORM"});function v(e,n){return e.replace(/{{([^}]+)}}/g,function(e,t){return void 0!==n[t]?n[t]:e})}function S(e){for(var t,n={},r=/([^&=]+)=?([^&#]*)/g;null!==(t=r.exec(e));)n[t[1]]=decodeURIComponent(t[2]);return n}function E(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(""!==n&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]));return n}function u(e){var t,n,r,o,i,a,s,c,d,l,u,p,h,f,m,y=e.contentUrl,g=e.dispatchRoot+"Closer.html",R=e.defaultCssUrl,_=e.learnerId,w=(new Date).toISOString().slice(0,10);"https:"===e.currentLocation.protocol?(y=y.replace("http:","https:"),g=g.replace("http:","https:"),void 0!==R&&(R=R.replace("http:","https:"))):(y=y.replace("https:","http:"),g=g.replace("https:","http:"),void 0!==R&&(R=R.replace("https:","http:"))),e.options=e.options||{},void 0===e.options.learnerIdTemplate&&(e.options.learnerIdTemplate="{{learnerId}}"),void 0===e.options.learnerFirstNameTemplate&&(e.options.learnerFirstNameTemplate="{{learnerFirstName}}"),void 0===e.options.learnerLastNameTemplate&&(e.options.learnerLastNameTemplate="{{learnerLastName}}"),void 0!==e.options.launchToken&&(a=y,s=e.options.launchToken,c=a.split("?"),d=S(c[1]),l=c[0].split("/"),u=l.slice(0,l.length-2).join("/"),delete d.dispatchid,delete d.launchsecret,d.launchtoken=s,y=u+"?"+E(d)),_=v(e.options.learnerIdTemplate,{learnerId:_,learnerIdHash:CryptoJS.SHA256(_).toString(CryptoJS.enc.Hex)}),n=v(e.options.learnerLastNameTemplate,{learnerLastName:e.learnerNameParts[0],learnerLastNameHash:CryptoJS.SHA256(e.learnerNameParts[0]).toString(CryptoJS.enc.Hex)}),t=v(e.options.learnerFirstNameTemplate,{learnerFirstName:e.learnerNameParts[1],learnerFirstNameHash:CryptoJS.SHA256(e.learnerNameParts[1]).toString(CryptoJS.enc.Hex)}),_=_.replace(/[\\/]/g,"_"),y=(y=(y=(y=y.replace("LEARNER_ID",encodeURIComponent(_))).replace("LEARNER_LNAME",encodeURIComponent(n))).replace("LEARNER_FNAME",encodeURIComponent(t))).replace("REFERRING_URL",encodeURIComponent(e.currentLocation)),p=e.currentLocation,h=p.protocol,f=p.host,(m=p.pathname.split("/")).pop(),r=[h,"//",f,m.join("/")].join(""),y=(y=y.replace("PIPE_URL",encodeURIComponent(r))).replace("REDIRECT_URL",encodeURIComponent(g)),void 0!==R&&(y=y.replace("CSS_URL",encodeURIComponent(R))),y=e.isLti?y.replace("_REGISTRATION_ARGUMENT","&regid=_lti_"):e.entryMode===ENTRY_FIRST_TIME?y.replace("_REGISTRATION_ARGUMENT","&regid=_new_"):null===e.regId||""===e.regId||/[^-\w.]+/.test(e.regId)?void 0!==e.dispatchVersion&&0<e.dispatchVersion?y.replace("_REGISTRATION_ARGUMENT","&regid=_none_"):y.replace("_REGISTRATION_ARGUMENT",""):y.replace("_REGISTRATION_ARGUMENT","&regid="+encodeURIComponent(e.regId)),(i=document.createElement("meta")).name="viewport",i.content="width=device-width, initial-scale=1",document.getElementsByTagName("head")[0].appendChild(i),(o=document.createElement("script")).async=!0,o.src=e.dispatchRoot+"dispatch.client.driver.js?cache=68e0589991695ae44f2af0f5e1fba98fac4371fc-"+w,o.onload=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||(clearTimeout(e.timeoutId),o.parentNode.removeChild(o),o=null,document.getElementById("dispatch_loading_frame").src=e.dispatchRoot+"loading.html",document.getElementById("dispatch_content_frame").src=e.dispatchRoot+"DispatchHost.html?cache=68e0589991695ae44f2af0f5e1fba98fac4371fc-"+w+"&URL="+encodeURIComponent(y)+"#"+r)},document.getElementsByTagName("head")[0].appendChild(o)}window.LoadContent=function(){var e,t={currentLocation:window.location,contentUrl:ContentURL,dispatchRoot:DispatchRoot,dispatchVersion:DispatchVersion,isLti:!1};return-1<ContentURL.indexOf("EngineWebServices//api")?(e=ContentURL.replace("EngineWebServices//api?method=rustici.dispatch.launch","ScormEngineInterface/dispatch/DispatchRequest.jsp?methodName=PreLaunchConfiguration&isLws=true").replace("learnerid=LEARNER_ID&fname=LEARNER_FNAME&lname=LEARNER_LNAME&referringurl=REFERRING_URL&pipeurl=PIPE_URL&redirecturl=REDIRECT_URL&cssurl=CSS_URL",""),t.contentUrl=ContentURL.replace("EngineWebServices//api?method=rustici.dispatch.launch","ScormEngineInterface/dispatch/DispatchRequest.jsp?methodName=Launch&isLws=true")):"undefined"!=typeof PreLaunchConfigurationURL&&""!==PreLaunchConfigurationURL&&(e=PreLaunchConfigurationURL),function(){var e,t,n,r,o,i,a,s=document.getElementById("dispatch_frameset");if(null!==s&&"FRAMESET"===s.tagName){for((e=document.createElement("body")).onload=s.onload,e.onunload=s.onunload;s.firstElementChild;)"dispatch_aicc_comm"===(t=s.firstElementChild).id&&(o=!0,i=s.firstElementChild.contentDocument.body.onunload,a=s.firstElementChild.contentDocument.body.onbeforeunload,s.firstElementChild.contentDocument.body.onbeforeunload=null,s.firstElementChild.contentDocument.body.onunload=null),s.removeChild(s.firstElementChild),(n=document.createElement("iframe")).id=n.name=t.id,"dispatch_loading_frame"!==n.id&&(n.style.display="none"),n.src=t.src,o&&(o=!1,n.onload=function(){this.contentDocument.body.onunload=i,this.contentDocument.body.onbeforeunload=a,window.AICCComm=this.contentWindow}),e.appendChild(n);s.parentNode.replaceChild(e,s),document.getElementById("dispatch_content_frame").allow="autoplay",document.getElementById("dispatch_content_frame").setAttribute("allowfullscreen",""),document.getElementById("dispatch_content_frame").setAttribute("mozallowfullscreen",""),document.getElementById("dispatch_content_frame").setAttribute("webkitallowfullscreen",""),(r=document.createElement("style")).innerText="html { height: 100%; overflow-y: hidden; } iframe, body { height:100%; width:100%; border:none; margin: 0px; }",document.head.appendChild(r)}}(),window.scormdriver_content=window.dispatch_content_frame,""===t.contentUrl?(alert("ERROR - no ContentURL specified"),!1):(t.learnerId=objLMS.GetStudentID(),null===t.learnerId||0===t.learnerId.length?(alert("The host LMS for this dispatch returned an empty learner id. Since the learner id is required for dispatch, the launch has been halted."),!1):(t.learnerNameParts=function(e){var t,n=[];if(0<=e.indexOf(",")){if(1===(n=e.split(",")).length)return n[0].length<1?["Unknown","Learner"]:[n[0].replace(/\s+/g,""),n[0].replace(/\s+/g,"")];if(0===n.length)return["Unknown","Learner"]}else 0<=e.indexOf(" ")?(t=e.indexOf(" "),n.push(e.substr(t+1)),n.push(e.substr(0,t))):n=[e,"Learner"];return n[0]=n[0].replace(/\s+/g,""),n[1]=n[1].replace(/\s+/g,""),""===n[0]&&(n[0]="Unknown"),""===n[1]&&(n[1]="Learner"),n}(objLMS.GetStudentName()),t.entryMode=objLMS.GetEntryMode(),"undefined"!=typeof IsLtiDispatch&&IsLtiDispatch?t.isLti=!0:t.entryMode!==ENTRY_FIRST_TIME&&(t.regId=objLMS.GetDataChunk()),"undefined"!=typeof DefaultCssUrl&&(t.cssUrl=DefaultCssUrl),t.timeoutId=setTimeout(function(){alert("Failed to establish communication between LMSs (client.driver hasn't loaded)")},3e4),void(void 0===e||""===e?u(t):function(e,t){var n,r,o,i,a=e,s=a.split("?"),c=a.split("/"),d=c.length,l=!1;1===s.length&&(l=!0,o=c[d-1],r=c[d-2],a=c.slice(0,d-2).join("/")),2===s.length&&void 0!==(n=S(s[1])).dispatchid&&void 0!==n.launchsecret&&(l=!0,r=n.dispatchid||n.contentId,o=n.launchsecret||n.secret,delete n.dispatchid,delete n.launchsecret,delete n.contentId,delete n.secret,a=s[0]+"?"+E(n)),(i=new XMLHttpRequest).open("GET",a,!0),l&&(i.setRequestHeader("EngineDispatchId",r),i.setRequestHeader("EngineDispatchLaunchSecret",o)),i.onreadystatechange=function(){if(4===i.readyState){if(200===i.status){try{t.options=JSON.parse(i.responseText)}catch(e){return void alert("Failed to parse response from pre-launch configuration URL as JSON, the launch has been halted. ("+e+")")}return void u(t)}alert("Unrecognized HTTP status returned from pre-launch configuration URL ("+i.status+"), the launch has been halted.")}};try{i.send()}catch(e){}}(e,t))))};var t=function(){objLMS&&objLMS.GetStatus()===LESSON_STATUS_NOT_ATTEMPTED?objLMS.ResetStatus():objLMS||setTimeout(t,100)};document.body?document.body.onload=function(){DispatchStart(),t()}:t()}();
//# sourceMappingURL=dispatch.client.loader.js.map